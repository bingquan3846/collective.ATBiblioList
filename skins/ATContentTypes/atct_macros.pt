<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en-US"
      lang="en-US"
      i18n:domain="plone">

<body>

<metal:criterion metal:define-macro="criterion_edit">
   <tal:define-block tal:define="
                schematas criterion/Schemata;
                fieldsets python:[key for key in schematas.keys() if key != 'metadata'];
                default_fieldset python:(not schematas or schematas.has_key('default'))
                                         and 'default' or fieldsets[0];
                fieldset request/fieldset|options/fieldset|default_fieldset;
                edit_macros here/edit_macros/macros;
                criterionid criterion/getId;
               ">

	  <fieldset>

	    <legend
	     i18n:translate=""
	     tal:content="string:Criterion for ${criterion/Field} " />

        <div tal:content="criterion/Description" />

        <input class="noborder"
               type="checkbox" 
               value="" 
               name="criterion_ids:list" 
               id=""
               tal:attributes="value criterionid; 
                               id string:cb_${criterionid}"
               />

        <label for=""
               tal:attributes="for string:cb_${criterionid}">
            <span tal:content="criterion/Field">Field</span>
        </label>

        <div id="" 
             i18n:translate=""
             class="formHelp" 
             style="visibility:hidden"
             tal:content="criterion/Description"
             tal:attributes="id string:${criterionid}_help;"
             >
        String
        </div>

        <input type="hidden" 
               name="criteria.id:records" 
               value=""
               tal:attributes="value criterionid"
               />

	    <tal:fields repeat="field python: schematas[fieldset].fields()">
          <tal:editable tal:condition="python:field.mode != 'r'">
	          <metal:fieldMacro use-macro="python: criterion.widget('%s_%s' % (criterionid, field.getName()),
                                           field = field,
                                           mode='edit')"/>
          </tal:editable>
	    </tal:fields>

      </fieldset>

  </tal:define-block>
</metal:criterion>

<metal:typedescription metal:define-macro="typedescription">
        <tal:description tal:define="msgid here/typeDescMsgId | nothing;
                                     default here/typeDescription| nothing;"
                         tal:condition="default">

          <p tal:content="python:here.translate(msgid=msgid, default=default)">
            type description
          </p>

        </tal:description>
</metal:typedescription>

</body>
</html>